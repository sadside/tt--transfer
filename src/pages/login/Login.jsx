import { useEffect, useState } from "react";
import { useLocation, useNavigate } from "react-router-dom";
import LoginFields from "../../components/loginFields/LoginFields";
import Logo from "../../components/logo/Logo";
import "./login.scss";

const Login = () => {
  const [preloader, setPreloader] = useState(true);

  useEffect(() => {
    setTimeout(() => {
      setPreloader(false);
    }, 3000);
  }, []);

  const navigate = useNavigate();
  const location = useLocation();

  const fromPage = location.state?.from?.pathname || "/";

  return (
    <>
      {preloader ? (
        <div className="preloader">
          <svg
            width="480"
            height="90"
            viewBox="0 0 518 110"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M120.17 42.4375V35.6364H160.696V42.4375H144.358V88H136.483V42.4375H120.17ZM172.16 102.727V48.7273H179.625V55.0938H180.265C180.708 54.2756 181.347 53.3295 182.182 52.2557C183.017 51.1818 184.177 50.2443 185.66 49.4432C187.142 48.625 189.103 48.2159 191.54 48.2159C194.711 48.2159 197.54 49.017 200.029 50.6193C202.517 52.2216 204.469 54.5312 205.884 57.5483C207.316 60.5653 208.032 64.196 208.032 68.4403C208.032 72.6847 207.324 76.3239 205.91 79.358C204.495 82.375 202.552 84.7017 200.08 86.3381C197.608 87.9574 194.787 88.767 191.617 88.767C189.231 88.767 187.279 88.3665 185.762 87.5653C184.262 86.7642 183.086 85.8267 182.233 84.7528C181.381 83.679 180.725 82.7244 180.265 81.8892H179.804V102.727H172.16ZM179.651 68.3636C179.651 71.125 180.052 73.5455 180.853 75.625C181.654 77.7045 182.813 79.3324 184.33 80.5085C185.847 81.6676 187.705 82.2472 189.904 82.2472C192.188 82.2472 194.097 81.642 195.631 80.4318C197.165 79.2045 198.324 77.5426 199.108 75.446C199.91 73.3494 200.31 70.9886 200.31 68.3636C200.31 65.7727 199.918 63.446 199.134 61.3835C198.367 59.321 197.208 57.6932 195.657 56.5C194.123 55.3068 192.205 54.7102 189.904 54.7102C187.688 54.7102 185.813 55.2812 184.279 56.4233C182.762 57.5653 181.611 59.1591 180.827 61.2045C180.043 63.25 179.651 65.6364 179.651 68.3636ZM235.226 88.8693C232.737 88.8693 230.487 88.4091 228.476 87.4886C226.465 86.5511 224.871 85.196 223.695 83.4233C222.536 81.6506 221.956 79.4773 221.956 76.9034C221.956 74.6875 222.382 72.8636 223.235 71.4318C224.087 70 225.237 68.8665 226.686 68.0312C228.135 67.196 229.754 66.5653 231.544 66.1392C233.334 65.7131 235.158 65.3892 237.016 65.1676C239.368 64.8949 241.277 64.6733 242.743 64.5028C244.209 64.3153 245.274 64.017 245.939 63.608C246.604 63.1989 246.936 62.5341 246.936 61.6136V61.4347C246.936 59.2017 246.306 57.4716 245.044 56.2443C243.8 55.017 241.942 54.4034 239.47 54.4034C236.896 54.4034 234.868 54.9744 233.385 56.1165C231.919 57.2415 230.905 58.4943 230.342 59.875L223.158 58.2386C224.01 55.8523 225.254 53.9261 226.891 52.4602C228.544 50.9773 230.445 49.9034 232.592 49.2386C234.74 48.5568 236.999 48.2159 239.368 48.2159C240.936 48.2159 242.598 48.4034 244.354 48.7784C246.127 49.1364 247.78 49.8011 249.314 50.7727C250.865 51.7443 252.135 53.1335 253.124 54.9403C254.112 56.7301 254.607 59.0568 254.607 61.9205V88H247.141V82.6307H246.834C246.34 83.6193 245.598 84.5909 244.61 85.5455C243.621 86.5 242.351 87.2926 240.8 87.9233C239.249 88.554 237.391 88.8693 235.226 88.8693ZM236.888 82.733C239.002 82.733 240.808 82.3153 242.308 81.4801C243.825 80.6449 244.976 79.554 245.76 78.2074C246.561 76.8437 246.962 75.3864 246.962 73.8352V68.7727C246.689 69.0455 246.161 69.3011 245.377 69.5398C244.61 69.7614 243.732 69.9574 242.743 70.1278C241.754 70.2812 240.791 70.4261 239.854 70.5625C238.916 70.6818 238.132 70.7841 237.502 70.8693C236.019 71.0568 234.663 71.3722 233.436 71.8153C232.226 72.2585 231.254 72.8977 230.521 73.733C229.806 74.5511 229.448 75.642 229.448 77.0057C229.448 78.8977 230.146 80.3295 231.544 81.3011C232.942 82.2557 234.723 82.733 236.888 82.733ZM298.606 65.0653V71.6875H277.333V65.0653H298.606ZM279.481 48.7273V88H271.989V48.7273H279.481ZM303.949 48.7273V88H296.484V48.7273H303.949ZM337.919 88.7926C334.118 88.7926 330.845 87.9318 328.101 86.2102C325.374 84.4716 323.277 82.0767 321.811 79.0256C320.345 75.9744 319.613 72.4801 319.613 68.5426C319.613 64.554 320.363 61.0341 321.863 57.983C323.363 54.9148 325.476 52.5199 328.203 50.7983C330.931 49.0767 334.144 48.2159 337.843 48.2159C340.826 48.2159 343.485 48.7699 345.82 49.8778C348.155 50.9687 350.039 52.5028 351.47 54.4801C352.919 56.4574 353.78 58.767 354.053 61.4091H346.613C346.203 59.5682 345.266 57.983 343.8 56.6534C342.351 55.3239 340.408 54.6591 337.97 54.6591C335.84 54.6591 333.973 55.2216 332.371 56.3466C330.786 57.4545 329.55 59.0398 328.664 61.1023C327.777 63.1477 327.334 65.5682 327.334 68.3636C327.334 71.2273 327.769 73.6989 328.638 75.7784C329.507 77.858 330.735 79.4688 332.32 80.6108C333.922 81.7528 335.806 82.3239 337.97 82.3239C339.419 82.3239 340.732 82.0597 341.908 81.5312C343.101 80.9858 344.098 80.2102 344.899 79.2045C345.718 78.1989 346.289 76.9886 346.613 75.5739H354.053C353.78 78.1136 352.953 80.3807 351.573 82.375C350.192 84.3693 348.343 85.9375 346.024 87.0795C343.723 88.2216 341.022 88.7926 337.919 88.7926Z"
              fill="black"
              className="svg-elem-1"
            ></path>
            <path
              d="M386.329 101.372V35.6364H393.974V101.372H386.329ZM386.329 88.7926C383.55 88.7926 381.019 88.3153 378.735 87.3608C376.451 86.3892 374.482 85.0085 372.829 83.2188C371.175 81.429 369.897 79.2898 368.994 76.8011C368.107 74.3125 367.664 71.5597 367.664 68.5426C367.664 65.4915 368.107 62.7216 368.994 60.233C369.897 57.7443 371.175 55.6051 372.829 53.8153C374.482 52.0256 376.451 50.6449 378.735 49.6733C381.019 48.7017 383.55 48.2159 386.329 48.2159H388.221V88.7926H386.329ZM386.329 82.3494H387.403V54.6591H386.329C384.488 54.6591 382.886 55.0341 381.522 55.7841C380.158 56.517 379.025 57.5312 378.121 58.8267C377.218 60.1051 376.536 61.5795 376.076 63.25C375.633 64.9205 375.411 66.6847 375.411 68.5426C375.411 71.0312 375.812 73.3239 376.613 75.4205C377.414 77.5 378.624 79.179 380.244 80.4574C381.863 81.7187 383.891 82.3494 386.329 82.3494ZM393.974 88.7926H392.056V48.2159H393.974C396.752 48.2159 399.283 48.7017 401.567 49.6733C403.852 50.6449 405.812 52.0256 407.448 53.8153C409.102 55.6051 410.371 57.7443 411.258 60.233C412.161 62.7216 412.613 65.4915 412.613 68.5426C412.613 71.5597 412.161 74.3125 411.258 76.8011C410.371 79.2898 409.102 81.429 407.448 83.2188C405.812 85.0085 403.852 86.3892 401.567 87.3608C399.283 88.3153 396.752 88.7926 393.974 88.7926ZM393.974 82.3494C395.815 82.3494 397.417 81.9915 398.781 81.2756C400.144 80.5426 401.278 79.5369 402.181 78.2585C403.085 76.9631 403.758 75.4886 404.201 73.8352C404.644 72.1648 404.866 70.4006 404.866 68.5426C404.866 66.071 404.465 63.7869 403.664 61.6903C402.88 59.5767 401.678 57.8807 400.059 56.6023C398.44 55.3068 396.411 54.6591 393.974 54.6591H392.874V82.3494H393.974ZM445.234 88.7926C441.365 88.7926 438.032 87.9659 435.237 86.3125C432.459 84.642 430.311 82.2983 428.794 79.2812C427.294 76.2472 426.544 72.6932 426.544 68.6193C426.544 64.5966 427.294 61.0511 428.794 57.983C430.311 54.9148 432.424 52.5199 435.135 50.7983C437.862 49.0767 441.049 48.2159 444.697 48.2159C446.913 48.2159 449.061 48.5824 451.14 49.3153C453.22 50.0483 455.086 51.1989 456.74 52.767C458.393 54.3352 459.697 56.3722 460.652 58.8778C461.606 61.3665 462.084 64.392 462.084 67.9545V70.6648H430.865V64.9375H454.592C454.592 62.9261 454.183 61.1449 453.365 59.5938C452.547 58.0256 451.396 56.7898 449.913 55.8864C448.447 54.983 446.726 54.5312 444.748 54.5312C442.601 54.5312 440.726 55.0597 439.123 56.1165C437.538 57.1562 436.311 58.5199 435.441 60.2074C434.589 61.8778 434.163 63.6932 434.163 65.6534V70.1278C434.163 72.7528 434.623 74.9858 435.544 76.8267C436.481 78.6676 437.785 80.0739 439.456 81.0455C441.126 82 443.078 82.4773 445.311 82.4773C446.76 82.4773 448.081 82.2727 449.274 81.8636C450.467 81.4375 451.498 80.8068 452.368 79.9716C453.237 79.1364 453.902 78.1051 454.362 76.8778L461.598 78.1818C461.018 80.3125 459.978 82.179 458.478 83.7812C456.995 85.3665 455.129 86.6023 452.879 87.4886C450.646 88.358 448.098 88.7926 445.234 88.7926ZM477.766 102.727V48.7273H485.232V55.0938H485.871C486.314 54.2756 486.953 53.3295 487.788 52.2557C488.624 51.1818 489.783 50.2443 491.266 49.4432C492.749 48.625 494.709 48.2159 497.146 48.2159C500.317 48.2159 503.146 49.017 505.635 50.6193C508.124 52.2216 510.075 54.5312 511.49 57.5483C512.922 60.5653 513.638 64.196 513.638 68.4403C513.638 72.6847 512.931 76.3239 511.516 79.358C510.101 82.375 508.158 84.7017 505.686 86.3381C503.215 87.9574 500.394 88.767 497.223 88.767C494.837 88.767 492.885 88.3665 491.368 87.5653C489.868 86.7642 488.692 85.8267 487.84 84.7528C486.987 83.679 486.331 82.7244 485.871 81.8892H485.411V102.727H477.766ZM485.257 68.3636C485.257 71.125 485.658 73.5455 486.459 75.625C487.26 77.7045 488.419 79.3324 489.936 80.5085C491.453 81.6676 493.311 82.2472 495.51 82.2472C497.794 82.2472 499.703 81.642 501.237 80.4318C502.771 79.2045 503.931 77.5426 504.715 75.446C505.516 73.3494 505.916 70.9886 505.916 68.3636C505.916 65.7727 505.524 63.446 504.74 61.3835C503.973 59.321 502.814 57.6932 501.263 56.5C499.729 55.3068 497.811 54.7102 495.51 54.7102C493.294 54.7102 491.419 55.2812 489.885 56.4233C488.368 57.5653 487.217 59.1591 486.433 61.2045C485.649 63.25 485.257 65.6364 485.257 68.3636Z"
              fill="#8DC73F"
              className="svg-elem-2"
            ></path>
            <line
              x1="57.5"
              y1="110"
              x2="57.5"
              y2="18"
              stroke="#8DC73F"
              strokeWidth="9"
              className="svg-elem-3"
            ></line>
            <line
              x1="99"
              y1="22.5"
              x2="19"
              y2="22.5"
              stroke="#8DC73F"
              strokeWidth="9"
              className="svg-elem-4"
            ></line>
            <line
              x1="38.5"
              y1="80"
              x2="38.5"
              stroke="black"
              strokeWidth="9"
              className="svg-elem-5"
            ></line>
            <line
              x1="80"
              y1="4.5"
              y2="4.5"
              stroke="black"
              strokeWidth="9"
              className="svg-elem-6"
            ></line>
          </svg>
        </div>
      ) : (
        <div className={"login-wrap"}>
          <Logo />
          <LoginFields />
        </div>
      )}
    </>
  );
};

export default Login;
